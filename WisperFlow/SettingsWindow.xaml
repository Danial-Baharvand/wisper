<Window x:Class="WisperFlow.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WisperFlow Settings"
        Width="900" Height="700"
        MinWidth="800" MinHeight="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResizeWithGrip"
        Background="{StaticResource PrimaryBrush}">
    
    <Window.Resources>
        <!-- Sidebar Button Style -->
        <Style x:Key="SidebarButton" TargetType="RadioButton">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="border" Background="Transparent" 
                                CornerRadius="8" Padding="16,12" Cursor="Hand">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock x:Name="icon" Text="{TemplateBinding Tag}" 
                                           FontSize="18" Width="28" 
                                           Foreground="{StaticResource TextSecondaryBrush}"
                                           VerticalAlignment="Center"/>
                                <TextBlock x:Name="text" Text="{TemplateBinding Content}" 
                                           FontFamily="Segoe UI" FontSize="14"
                                           Foreground="{StaticResource TextSecondaryBrush}"
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource TertiaryBrush}"/>
                                <Setter TargetName="text" Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
                                <Setter TargetName="icon" Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource AccentDimBrush}"/>
                                <Setter TargetName="text" Property="Foreground" Value="{StaticResource AccentBrush}"/>
                                <Setter TargetName="icon" Property="Foreground" Value="{StaticResource AccentBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="GroupName" Value="SettingsNav"/>
        </Style>
        
        <!-- Section Title Style -->
        <Style x:Key="SectionTitle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI Semibold"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="Margin" Value="0,0,0,20"/>
        </Style>
        
        <!-- Option Label Style -->
        <Style x:Key="OptionLabel" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
        
        <!-- Small Toggle Style (compact) -->
        <Style x:Key="SmallToggle" TargetType="CheckBox" BasedOn="{StaticResource ModernToggle}">
            <Setter Property="Margin" Value="0,4,0,8"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <!-- Sidebar -->
        <Border Grid.Column="0" Background="{StaticResource SecondaryBrush}" 
                BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,1,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Logo/Header -->
                <StackPanel Grid.Row="0" Margin="20,24,20,24">
                    <StackPanel Orientation="Horizontal">
                        <Border Width="4" Height="32" CornerRadius="2" 
                                Background="{StaticResource AccentBrush}" Margin="0,0,12,0"/>
                        <TextBlock Text="WisperFlow" FontFamily="Segoe UI Semibold" 
                                   FontSize="20" Foreground="{StaticResource TextPrimaryBrush}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                    <TextBlock Text="Voice to Text" FontSize="12" 
                               Foreground="{StaticResource TextSecondaryBrush}" 
                               Margin="16,4,0,0"/>
                </StackPanel>
                
                <!-- Navigation -->
                <StackPanel Grid.Row="1" Margin="8,0,8,0">
                    <RadioButton x:Name="NavGeneral" Style="{StaticResource SidebarButton}" 
                                 Content="General" Tag="âš™ï¸" IsChecked="True"
                                 Checked="Nav_Checked"/>
                    <RadioButton x:Name="NavAudio" Style="{StaticResource SidebarButton}" 
                                 Content="Audio" Tag="ðŸŽ¤"
                                 Checked="Nav_Checked"/>
                    <RadioButton x:Name="NavTranscription" Style="{StaticResource SidebarButton}" 
                                 Content="Transcription" Tag="ðŸ“"
                                 Checked="Nav_Checked"/>
                    <RadioButton x:Name="NavDeepgram" Style="{StaticResource SidebarButton}" 
                                 Content="Deepgram" Tag="ðŸš€"
                                 Checked="Nav_Checked"/>
                    <RadioButton x:Name="NavPolish" Style="{StaticResource SidebarButton}" 
                                 Content="Polish / LLM" Tag="âœ¨"
                                 Checked="Nav_Checked"/>
                    <RadioButton x:Name="NavCodeDictation" Style="{StaticResource SidebarButton}" 
                                 Content="Code Dictation" Tag="ðŸ’»"
                                 Checked="Nav_Checked"/>
                    <RadioButton x:Name="NavCommand" Style="{StaticResource SidebarButton}" 
                                 Content="Command Mode" Tag="ðŸ”®"
                                 Checked="Nav_Checked"/>
                    <RadioButton x:Name="NavApiKeys" Style="{StaticResource SidebarButton}" 
                                 Content="API Keys" Tag="ðŸ”‘"
                                 Checked="Nav_Checked"/>
                </StackPanel>
                
                <!-- Footer -->
                <StackPanel Grid.Row="2" Margin="16,0,16,16">
                    <Button Content="View Logs" Style="{StaticResource SecondaryButton}" 
                            Padding="16,10" Click="ViewLogs_Click" Margin="0,0,0,8"/>
                    <TextBlock x:Name="VersionText" Text="v1.0.0" 
                               FontSize="11" Foreground="{StaticResource TextSecondaryBrush}"
                               HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Main Content Area -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Scrollable Content -->
            <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Padding="32,24,32,24">
                <Grid>
                    <!-- General Section -->
                    <StackPanel x:Name="SectionGeneral" Visibility="Visible">
                        <TextBlock Text="General Settings" Style="{StaticResource SectionTitle}"/>
                        
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Text="Dictation Hotkey" Style="{StaticResource OptionLabel}"/>
                                <TextBox x:Name="HotkeyTextBox" Style="{StaticResource ModernTextBox}"
                                         Text="Ctrl + Win" IsReadOnly="True" Cursor="Hand"
                                         PreviewKeyDown="HotkeyTextBox_PreviewKeyDown"
                                         PreviewKeyUp="HotkeyTextBox_PreviewKeyUp"
                                         GotFocus="HotkeyTextBox_GotFocus"
                                         LostFocus="HotkeyTextBox_LostFocus"
                                         Margin="0,0,0,16"/>
                                
                                <CheckBox x:Name="StartupCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Launch at Windows startup"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                    <!-- Audio Section -->
                    <StackPanel x:Name="SectionAudio" Visibility="Collapsed">
                        <TextBlock Text="Audio Settings" Style="{StaticResource SectionTitle}"/>
                        
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Text="Microphone" Style="{StaticResource OptionLabel}"/>
                                <ComboBox x:Name="MicrophoneComboBox" Style="{StaticResource ModernComboBox}"
                                          Margin="0,0,0,20"/>
                                
                                <TextBlock Text="Language" Style="{StaticResource OptionLabel}"/>
                                <ComboBox x:Name="LanguageComboBox" Style="{StaticResource ModernComboBox}"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                    <!-- Transcription Section -->
                    <StackPanel x:Name="SectionTranscription" Visibility="Collapsed">
                        <TextBlock Text="Transcription" Style="{StaticResource SectionTitle}"/>
                        
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Text="Transcription Model" Style="{StaticResource OptionLabel}"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <ComboBox x:Name="TranscriptionModelComboBox" 
                                              Style="{StaticResource ModernComboBox}"
                                              SelectionChanged="TranscriptionModel_Changed"/>
                                    <Button Grid.Column="1" Content="Manage" 
                                            Style="{StaticResource SecondaryButton}"
                                            Padding="16,12" Margin="12,0,0,0"
                                            Click="ManageModels_Click"/>
                                </Grid>
                                <TextBlock x:Name="TranscriptionModelDesc"
                                           Foreground="{StaticResource TextSecondaryBrush}"
                                           FontSize="11" TextWrapping="Wrap" Margin="0,8,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                    <!-- Deepgram Section -->
                    <StackPanel x:Name="SectionDeepgram" Visibility="Collapsed">
                        <TextBlock Text="Deepgram Options" Style="{StaticResource SectionTitle}"/>
                        
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Text="MODE" Style="{StaticResource SettingLabel}"/>
                                <CheckBox x:Name="DeepgramStreamingCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Enable real-time streaming (faster for long recordings)"/>
                                <Border Background="{StaticResource TertiaryBrush}" CornerRadius="8" 
                                        Padding="12" Margin="0,0,0,20">
                                    <TextBlock TextWrapping="Wrap" FontSize="11" 
                                               Foreground="{StaticResource TextSecondaryBrush}">
                                        <Run FontWeight="SemiBold" Foreground="{StaticResource AccentBrush}">Streaming:</Run>
                                        <Run> Audio is transcribed while recording via WebSocket. Faster for long recordings (30s+).</Run>
                                        <LineBreak/>
                                        <Run FontWeight="SemiBold" Foreground="{StaticResource AccentBrush}">Batch:</Run>
                                        <Run> Complete audio is uploaded after recording. More accurate for short recordings.</Run>
                                    </TextBlock>
                                </Border>
                                
                                <TextBlock Text="FORMATTING" Style="{StaticResource SettingLabel}"/>
                                <CheckBox x:Name="DeepgramSmartFormatCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Smart Format (numbers, dates, currency)"/>
                                <CheckBox x:Name="DeepgramPunctuateCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Auto Punctuation"/>
                                <CheckBox x:Name="DeepgramUtterancesCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Utterances (split into sentences)"/>
                                <CheckBox x:Name="DeepgramParagraphsCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Paragraphs" Margin="0,0,0,20"/>
                                
                                <TextBlock Text="DICTATION OPTIMIZATIONS" Style="{StaticResource SettingLabel}"/>
                                <CheckBox x:Name="DeepgramDictationCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Dictation mode (optimized for voice input)"/>
                                <CheckBox x:Name="DeepgramNumeralsCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Convert numbers (five hundred â†’ 500)" Margin="0,0,0,20"/>
                                
                                <TextBlock Text="ADVANCED" Style="{StaticResource SettingLabel}"/>
                                <CheckBox x:Name="DeepgramDiarizeCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Speaker Diarization (identify speakers)"/>
                                <CheckBox x:Name="DeepgramFillerWordsCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Detect Filler Words (um, uh)"/>
                                
                                <TextBlock Text="Profanity Filter" Style="{StaticResource OptionLabel}" Margin="0,12,0,8"/>
                                <ComboBox x:Name="DeepgramProfanityComboBox" Style="{StaticResource ModernComboBox}"
                                          Width="200" HorizontalAlignment="Left" Margin="0,0,0,20"/>
                                
                                <TextBlock Text="STREAMING SPEED" Style="{StaticResource SettingLabel}"/>
                                <TextBlock Text="Endpointing (ms) - Lower = faster response, 0 = default" 
                                           Style="{StaticResource OptionLabel}"/>
                                <ComboBox x:Name="DeepgramEndpointingComboBox" Style="{StaticResource ModernComboBox}"
                                          Width="200" HorizontalAlignment="Left" Margin="0,0,0,20"/>
                                
                                <TextBlock Text="PRIVACY" Style="{StaticResource SettingLabel}"/>
                                <CheckBox x:Name="DeepgramMipOptOutCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Opt out of Model Improvement Program"/>
                                <TextBlock Text="Redact sensitive info (comma-separated: pci, ssn, numbers, phone)" 
                                           Style="{StaticResource OptionLabel}" Margin="0,12,0,8"/>
                                <TextBox x:Name="DeepgramRedactTextBox" Style="{StaticResource ModernTextBox}"
                                         Text="" Width="300" HorizontalAlignment="Left"
                                         ToolTip="Example: pci, ssn, phone" Margin="0,0,0,20"/>
                                
                                <TextBlock Text="KEYWORD BOOSTING" Style="{StaticResource SettingLabel}"/>
                                <TextBlock Text="Boost recognition of specific words (comma-separated)" 
                                           Style="{StaticResource OptionLabel}"/>
                                <TextBox x:Name="DeepgramKeywordsTextBox" Style="{StaticResource ModernTextBox}"
                                         Text="" ToolTip="Example: WisperFlow, API, Python"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                    <!-- Polish/LLM Section -->
                    <StackPanel x:Name="SectionPolish" Visibility="Collapsed">
                        <TextBlock Text="Polish / LLM" Style="{StaticResource SectionTitle}"/>
                        
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <CheckBox x:Name="PolishCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Polish output (punctuation, grammar, formatting)"/>
                                
                                <TextBlock Text="Polish Model" Style="{StaticResource OptionLabel}" Margin="0,12,0,8"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <ComboBox x:Name="PolishModelComboBox" 
                                              Style="{StaticResource ModernComboBox}"
                                              SelectionChanged="PolishModel_Changed"/>
                                    <Button Grid.Column="1" Content="Manage" 
                                            Style="{StaticResource SecondaryButton}"
                                            Padding="16,12" Margin="12,0,0,0"
                                            Click="ManageModels_Click"/>
                                </Grid>
                                <TextBlock x:Name="PolishModelDesc"
                                           Foreground="{StaticResource TextSecondaryBrush}"
                                           FontSize="11" TextWrapping="Wrap" Margin="0,8,0,20"/>
                                
                                <CheckBox x:Name="NotesModeCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Notes mode (aggressive cleanup, bullets, headings)"/>
                                <Border Background="{StaticResource TertiaryBrush}" CornerRadius="8" Padding="12">
                                    <TextBlock Text="Notes mode removes filler words, creates bullet lists, and formats headings."
                                               Foreground="{StaticResource TextSecondaryBrush}"
                                               FontSize="11" TextWrapping="Wrap"/>
                                </Border>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                    <!-- Code Dictation Section -->
                    <StackPanel x:Name="SectionCodeDictation" Visibility="Collapsed">
                        <TextBlock Text="Code Dictation" Style="{StaticResource SectionTitle}"/>
                        
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <CheckBox x:Name="CodeDictationCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Enable code dictation mode"/>
                                
                                <TextBlock Text="Hotkey" Style="{StaticResource OptionLabel}" Margin="0,12,0,8"/>
                                <TextBox x:Name="CodeDictationHotkeyTextBox" Style="{StaticResource ModernTextBox}"
                                         Text="Ctrl + Shift" IsReadOnly="True" Cursor="Hand"
                                         Width="200" HorizontalAlignment="Left"
                                         PreviewKeyDown="CodeDictationHotkeyTextBox_PreviewKeyDown"
                                         PreviewKeyUp="CodeDictationHotkeyTextBox_PreviewKeyUp"
                                         GotFocus="CodeDictationHotkeyTextBox_GotFocus"
                                         LostFocus="CodeDictationHotkeyTextBox_LostFocus"
                                         Margin="0,0,0,16"/>
                                
                                <TextBlock Text="Code Model (3B+ recommended)" Style="{StaticResource OptionLabel}"/>
                                <ComboBox x:Name="CodeDictationModelComboBox" 
                                          Style="{StaticResource ModernComboBox}"
                                          SelectionChanged="CodeDictationModel_Changed"/>
                                <TextBlock x:Name="CodeDictationModelDesc"
                                           Foreground="{StaticResource TextSecondaryBrush}"
                                           FontSize="11" TextWrapping="Wrap" Margin="0,8,0,16"/>
                                
                                <TextBlock Text="Language" Style="{StaticResource OptionLabel}"/>
                                <ComboBox x:Name="CodeDictationLanguageComboBox" 
                                          Style="{StaticResource ModernComboBox}"
                                          Width="200" HorizontalAlignment="Left" Margin="0,0,0,16"/>
                                
                                <Border Background="{StaticResource TertiaryBrush}" CornerRadius="8" Padding="12">
                                    <TextBlock TextWrapping="Wrap" FontSize="11">
                                        <Run Foreground="{StaticResource TextSecondaryBrush}">Examples:</Run>
                                        <LineBreak/>
                                        <Run Foreground="{StaticResource TextSecondaryBrush}">"for i in range 10" â†’ </Run>
                                        <Run Foreground="{StaticResource AccentBrush}" FontFamily="Consolas">for i in range(10):</Run>
                                        <LineBreak/>
                                        <Run Foreground="{StaticResource TextSecondaryBrush}">"define function add" â†’ </Run>
                                        <Run Foreground="{StaticResource AccentBrush}" FontFamily="Consolas">def add():</Run>
                                    </TextBlock>
                                </Border>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                    <!-- Command Mode Section -->
                    <StackPanel x:Name="SectionCommand" Visibility="Collapsed">
                        <TextBlock Text="Command Mode" Style="{StaticResource SectionTitle}"/>
                        
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <CheckBox x:Name="CommandModeCheckBox" Style="{StaticResource SmallToggle}"
                                          Content="Enable command mode"/>
                                
                                <TextBlock Text="Hotkey" Style="{StaticResource OptionLabel}" Margin="0,12,0,8"/>
                                <TextBox x:Name="CommandHotkeyTextBox" Style="{StaticResource ModernTextBox}"
                                         Text="Ctrl + Win + Alt" IsReadOnly="True" Cursor="Hand"
                                         Width="200" HorizontalAlignment="Left"
                                         PreviewKeyDown="CommandHotkeyTextBox_PreviewKeyDown"
                                         PreviewKeyUp="CommandHotkeyTextBox_PreviewKeyUp"
                                         GotFocus="CommandHotkeyTextBox_GotFocus"
                                         LostFocus="CommandHotkeyTextBox_LostFocus"
                                         Margin="0,0,0,16"/>
                                
                                <TextBlock Text="LLM Model for Commands" Style="{StaticResource OptionLabel}"/>
                                <TextBlock Text="Used for text transformation and generation" 
                                           FontSize="11" Foreground="{StaticResource TextSecondaryBrush}" 
                                           Margin="0,0,0,8"/>
                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <ComboBox x:Name="CommandModeModelComboBox" 
                                              Style="{StaticResource ModernComboBox}"
                                              SelectionChanged="CommandModeModel_Changed"/>
                                    <Button Grid.Column="1" Content="Manage"
                                            Style="{StaticResource ModernButton}"
                                            Click="ManageModels_Click" Margin="8,0,0,0"/>
                                </Grid>
                                
                                <TextBlock Text="When no text is selected, open in:" Style="{StaticResource OptionLabel}"/>
                                <ComboBox x:Name="SearchEngineComboBox" Style="{StaticResource ModernComboBox}" 
                                          Width="200" HorizontalAlignment="Left" Margin="0,0,0,16"/>
                                
                                <Border Background="{StaticResource TertiaryBrush}" CornerRadius="8" Padding="12">
                                    <TextBlock TextWrapping="Wrap" FontSize="11" 
                                               Foreground="{StaticResource TextSecondaryBrush}">
                                        â€¢ With text selected: transforms the text using the LLM model above
                                        <LineBreak/>
                                        â€¢ Text input focused, no selection: generates text with instruction
                                        <LineBreak/>
                                        â€¢ No text input focused: opens query in AI chat
                                    </TextBlock>
                                </Border>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                    <!-- API Keys Section -->
                    <StackPanel x:Name="SectionApiKeys" Visibility="Collapsed">
                        <TextBlock Text="API Keys" Style="{StaticResource SectionTitle}"/>
                        
                        <!-- OpenAI -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                    <TextBlock Text="ðŸ¤–" FontSize="18" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="OpenAI API Key" FontSize="14" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                                </StackPanel>
                                
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Border Background="{StaticResource TertiaryBrush}" 
                                            BorderBrush="{StaticResource BorderBrush}"
                                            BorderThickness="1" CornerRadius="8">
                                        <PasswordBox x:Name="ApiKeyPasswordBox" 
                                                     Background="Transparent"
                                                     Foreground="{StaticResource TextPrimaryBrush}"
                                                     BorderThickness="0" Padding="14,12"
                                                     FontFamily="Segoe UI" FontSize="13"/>
                                    </Border>
                                    <Button Grid.Column="1" Content="Save" 
                                            Style="{StaticResource SecondaryButton}"
                                            Padding="20,12" Margin="12,0,0,0"
                                            Click="SaveApiKey_Click"/>
                                </Grid>
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse x:Name="ApiKeyStatusDot" Width="8" Height="8" Margin="0,0,8,0"/>
                                    <TextBlock x:Name="ApiKeyStatusText" FontSize="12"
                                               Foreground="{StaticResource TextSecondaryBrush}"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                        
                        <!-- Deepgram -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                    <TextBlock Text="ðŸš€" FontSize="18" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="Deepgram API Key" FontSize="14" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                                </StackPanel>
                                
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Border Background="{StaticResource TertiaryBrush}" 
                                            BorderBrush="{StaticResource BorderBrush}"
                                            BorderThickness="1" CornerRadius="8">
                                        <PasswordBox x:Name="DeepgramApiKeyPasswordBox" 
                                                     Background="Transparent"
                                                     Foreground="{StaticResource TextPrimaryBrush}"
                                                     BorderThickness="0" Padding="14,12"
                                                     FontFamily="Segoe UI" FontSize="13"/>
                                    </Border>
                                    <Button Grid.Column="1" Content="Save" 
                                            Style="{StaticResource SecondaryButton}"
                                            Padding="20,12" Margin="12,0,0,0"
                                            Click="SaveDeepgramApiKey_Click"/>
                                </Grid>
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse x:Name="DeepgramApiKeyStatusDot" Width="8" Height="8" Margin="0,0,8,0"/>
                                    <TextBlock x:Name="DeepgramApiKeyStatusText" FontSize="12"
                                               Foreground="{StaticResource TextSecondaryBrush}"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                        
                        <Border Background="{StaticResource TertiaryBrush}" CornerRadius="8" Padding="16">
                            <TextBlock Text="Keys are stored securely in Windows Credential Manager. Alternatively, set OPENAI_API_KEY or DEEPGRAM_API_KEY environment variables."
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       FontSize="11" TextWrapping="Wrap"/>
                        </Border>
                    </StackPanel>
                </Grid>
            </ScrollViewer>
            
            <!-- Footer Buttons -->
            <Border Grid.Row="1" BorderThickness="0,1,0,0" BorderBrush="{StaticResource BorderBrush}" 
                    Background="{StaticResource SecondaryBrush}" Padding="32,16">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Cancel" Style="{StaticResource SecondaryButton}"
                            Padding="28,12" Click="Cancel_Click"/>
                    <Button Content="Save Changes" Style="{StaticResource ModernButton}"
                            Padding="28,12" Margin="12,0,0,0" Click="Save_Click"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
